!function(){var t=function(t){var e={exports:{}};return t.call(e.exports,e,e.exports),e.exports},e=(window,function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},a=function(t){return t&&t.__esModule?t:{"default":t}},s=t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=r.Card=function(){function t(e){n(this,t),this.suit=240&e,this.rank=15&e,this.text=a.transcribe(this.suit)+a.transcribe(this.rank)}return e(t,[{key:"id",value:function(){return this.suit|this.rank}},{key:"isAttack",value:function(){return this.rank===a.SEVEN||this.rank===a.KING||this.rank===a.DRAGON}},{key:"suitText",value:function(){return a.suitName(this.suit)}}]),t}(),o={},a=[],s={};a.HEARTS=16,a.BELLS=32,a.ACORNS=48,a.LEAVES=64,a.SEVEN=7,a.EIGHT=8,a.NINE=9,a.TEN=10,a.JACK=11,a.QUEEN=12,a.KING=13,a.ACE=14,a.DRAGON=0,o[a.HEARTS]="\u2665",o[a.BELLS]="\u2666",o[a.ACORNS]="\u2663",o[a.LEAVES]="\u2660",o[a.SEVEN]="\u2166",o[a.EIGHT]="\u2167",o[a.NINE]="\u2168",o[a.TEN]="\u2169",o[a.JACK]="J",o[a.QUEEN]="Q",o[a.KING]="K",o[a.ACE]="A",o[a.DRAGON]="D",s[a.HEARTS]="hearts",s[a.BELLS]="bells",s[a.ACORNS]="acorn",s[a.LEAVES]="leaves",a.shuffleNewDeck=function(){var t=0,e=0,n=null,r=a.slice();for(t=r.length-1;t>0;t-=1)e=Math.floor(Math.random()*(t+1)),n=r[t],r[t]=r[e],r[e]=n;return r},a.create=function(t,e){return new i(t|e)},a.transcribe=function(t){return o[t]},a.suitName=function(t){return s[t]},a.SUITS=Object.freeze([a.HEARTS,a.BELLS,a.ACORNS,a.LEAVES]),a.RANKS=Object.freeze([a.SEVEN,a.EIGHT,a.NINE,a.TEN,a.JACK,a.QUEEN,a.KING,a.ACE]),a.push(new i(a.DRAGON)),a.SUITS.forEach(function(t){a.RANKS.forEach(function(e){a.push(new i(t|e))})}),Object.freeze(a),r.cards=a}),l=t(function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.NoMove=a.QueerMove=a.LayMove=a.DrawMove=a.Move=a.GameState=void 0;var l=a.GameState=function(){function t(e){n(this,t),this.deck=Object.assign([],e.deck),this.pile=Object.assign([],e.pile),this.players=e.players.map(function(t){return Object.assign([],t)}),this.on_move=e.on_move,this.continuance=e.continuance,this.attack=e.attack,this.eights=e.eights,this.queer=e.queer}return e(t,[{key:"duplicate",value:function(){return new t(this)}},{key:"toNextPlayer",value:function(){var t=this.on_move+1;t>=this.players.length&&(t=0),this.on_move=t}},{key:"cardsLeftToTake",value:function(){return this.deck.length+this.pile.length-1}},{key:"onMovePlayerCards",value:function(){return this.players[this.on_move]}},{key:"pileCard",value:function(){var t=this.pile[this.pile.length-1],e="number"==typeof this.queer&&this.queer;return e?new s.Card(e|t.rank):t}},{key:"playerWon",value:function(){return 0===this.onMovePlayerCards().length&&null===this.queer&&0===this.attack&&0===this.eights}}]),t}();l.empty=new l({deck:[],pile:[],players:[],on_move:-1,continuance:!1,attack:0,eights:0,queer:null}),l.at=function(t){var e=l.empty.duplicate();if("object"!==("undefined"==typeof t?"undefined":r(t)))return e;["deck","pile","players","continuance","attack","queer","eights"].forEach(function(n){t[n]&&(e[n]=t[n])});var n=t.on_move;return void 0===n&&e.players.length>0&&(n=0),void 0!==n&&(e.on_move=n),e};var u=a.Move=function t(){n(this,t),this.valid=!0};u.parse=function(t){if("object"===("undefined"==typeof t?"undefined":r(t)))switch(t.m){case"draw":return new c;case"lay":return new p(t.card_i);case"queer":return new f(t.suit);case"no":return new d}};var c=a.DrawMove=function(t){function r(){return n(this,r),o(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return i(r,t),e(r,[{key:"serialize",value:function(){return{m:"draw"}}},{key:"evaluate",value:function(t){var e=t.state,n=e.pileCard();if(e.continuance&&e.queer===!0)return this.error="queer",void(this.valid=!1);if(e.continuance&&n.rank===s.cards.ACE)return this.error="ace",void(this.valid=!1);var r=e.attack,i=e.eights,o=1;r>0?o=r:i>0&&(o=i),o>e.cardsLeftToTake()&&(this.error="not_enough_cards",this.valid=!1)}},{key:"applyTo",value:function(t){t=t.duplicate(),t.continuance=!1,t.queer=null;var e=t.attack,n=t.eights,r=1;e>0?(r=e,t.attack=0):n>0&&(r=n,t.continuance=!0,t.eights=0);var i=t.pile.length-1;return r>=t.deck.length&&i>0&&(t.deck=t.deck.concat(t.pile.splice(0,i))),t.players[t.on_move]=t.players[t.on_move].concat(t.deck.splice(0,r)),t.toNextPlayer(),t}}]),r}(u),p=a.LayMove=function(t){function r(t){n(this,r);var e=o(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return e.card_i=t,e}return i(r,t),e(r,[{key:"serialize",value:function(){return{m:"lay",card_i:this.card_i}}},{key:"evaluate",value:function(t){var e=t.state;if(e.continuance&&e.queer===!0)return this.error="queer",void(this.valid=!1);var n=e.onMovePlayerCards()[this.card_i],r=e.pileCard();return e.attack>0&&!n.isAttack()&&n.rank!==s.cards.TEN?(this.error="attack",void(this.valid=!1)):e.continuance&&r.rank===s.cards.ACE&&n.rank!==s.cards.ACE?(this.error="ace",void(this.valid=!1)):r.rank===s.cards.TEN&&n.isAttack()?(this.error="attack_on_ten",void(this.valid=!1)):n.suit===r.suit||n.rank===r.rank||r.suit===s.cards.DRAGON||n.suit===s.cards.DRAGON||n.rank===s.cards.JACK?n.rank===s.cards.ACE&&1===e.onMovePlayerCards().length?(this.error="ace_end",void(this.valid=!1)):void(e.eights>0&&n.rank!==s.cards.EIGHT&&(this.error="eights",this.valid=!1)):(this.error="no_match",void(this.valid=!1))}},{key:"applyTo",value:function(t){t=t.duplicate();var e=t.players[t.on_move].splice(this.card_i,1)[0];t.pile.push(e);var n=t.attack,r=t.eights;t.continuance=!0,t.queer=null;var i=!0;switch(e.rank){case s.cards.SEVEN:t.attack=n+2;break;case s.cards.EIGHT:t.eights=r+1,i=!1;break;case s.cards.TEN:t.attack=0;break;case s.cards.QUEEN:t.queer=!0,i=!1;break;case s.cards.KING:t.attack=n+(e.suit===s.cards.LEAVES?4:0);break;case s.cards.DRAGON:t.attack=n+5}return i&&t.toNextPlayer(),t}}]),r}(u),f=a.QueerMove=function(t){function r(t){n(this,r);var e=o(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return e.suit=t,e}return i(r,t),e(r,[{key:"serialize",value:function(){return{m:"queer",suit:this.suit}}},{key:"evaluate",value:function(t){t.state.queer!==!0&&(this.error="no_queen",this.valid=!1)}},{key:"applyTo",value:function(t){return t=t.duplicate(),t.queer=this.suit,t.continuance=!0,t.toNextPlayer(),t}}]),r}(u),d=a.NoMove=function(t){function r(){return n(this,r),o(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return i(r,t),e(r,[{key:"serialize",value:function(){return{m:"no"}}},{key:"evaluate",value:function(t){var e=t.state,n=e.pileCard();return e.continuance&&e.queer?(this.error="queer",void(this.valid=!1)):void(e.continuance&&n.rank===s.cards.ACE||(this.error="nothing",this.valid=!1))}},{key:"applyTo",value:function(t){return t=t.duplicate(),t.continuance=!1,t.toNextPlayer(),t}}]),r}(u)}),u=t(function(t,i){"use strict";function o(t,e,n){if("object"===("undefined"==typeof t?"undefined":r(t))){var i=t[e[n]];return n+=1,n===e.length?i:o(i,e,n)}}Object.defineProperty(i,"__esModule",{value:!0}),i.Turn=i.Player=i.Game=void 0;var a=(i.Game=function(){function t(e,r){var i=this;n(this,t),this.state=l.GameState.empty.duplicate(),this.players=e,this.player_i=r,e.forEach(function(t,e){return t.joinGame(i,e)})}return e(t,[{key:"begin",value:function(t){var e=l.GameState.empty.duplicate();e.deck=void 0===t?s.cards.shuffleNewDeck():t;for(var n=0;n<this.players.length;n+=1)e.players[n]=e.deck.splice(0,6);e.pile=e.deck.splice(0,1),e.on_move=0,this.setState(e)}},{key:"localPlayer",value:function(){return this.players[this.player_i]}},{key:"createTurn",value:function(){return new a(this.state,this)}},{key:"setState",value:function(t){if(this.state=t,void 0!==this.history&&this.history.push(t),this.players.forEach(function(t){return t.gameStateChanged()}),this.state.playerWon()){var e=this.state.on_move;return void this.players.forEach(function(t){return t.playerEnded(e)})}this.state.on_move===this.player_i&&this.localPlayer().onMove()}},{key:"triggerEvent",value:function(){var t=this,e=Array.prototype.slice.call(arguments),n=this[e.shift()];n&&setTimeout(function(){n.apply(t,e)},0)}},{key:"onBadMove",value:function(){}},{key:"onPlayerMoved",value:function(t,e){this.setState(t.applyTo(this.state)),e&&this.propagateMove(t)}},{key:"propagateMove",value:function(){}},{key:"t",value:function(t){var e=o(this.translations,t.split("."),0);return void 0===e?"Missing text for key="+t:e}}]),t}(),i.Player=function(){function t(e){n(this,t),this.name=e}return e(t,[{key:"joinGame",value:function(t,e){this.game=t,this.player_i=e}},{key:"gameStateChanged",value:function(){}},{key:"onMove",value:function(){}},{key:"playerEnded",value:function(){}}]),t}(),i.Turn=function(){function t(e,r){n(this,t),this.state=e,this.game=r}return e(t,[{key:"lay",value:function(t){var e=new l.LayMove(t);return e.evaluate(this),e}},{key:"draw",value:function(){var t=new l.DrawMove;return t.evaluate(this),t}},{key:"doNothing",value:function(){var t=new l.NoMove;return t.evaluate(this),t}},{key:"selectQueenSuit",value:function(t){void 0===t&&(t=null);var e=new l.QueerMove(t);return e.evaluate(this),e}},{key:"possibleActions",value:function(){if(this.state.queer===!0)return["queer"];if(this.state.eights>0)return["draw","lay"];var t="draw";this.state.continuance&&(this.state.pileCard().rank===s.cards.ACE?t="stay":this.state.attack>0&&(t="devour"));var e=this.state.onMovePlayerCards(),n=1===e.length&&e[0].rank===s.cards.ACE;return n?[t]:[t,"lay"]}},{key:"makeAction",value:function(t){t.valid?this.game.onPlayerMoved(t,!0):this.game.onBadMove(t)}}]),t}())});(function(){(function(){(function(){var e=[].slice;this.ActionCable={INTERNAL:{message_types:{welcome:"welcome",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]},createConsumer:function(e){var n;return null==e&&(e=null!=(n=this.getConfig("url"))?n:this.INTERNAL.default_mount_path),new t.Consumer(this.createWebSocketURL(e))},getConfig:function(t){var e;return e=document.head.querySelector("meta[name='action-cable-"+t+"']"),null!=e?e.getAttribute("content"):void 0},createWebSocketURL:function(t){var e;return t&&!/^wss?:/i.test(t)?(e=document.createElement("a"),e.href=t,e.href=e.href,e.protocol=e.protocol.replace("http","ws"),e.href):t},startDebugging:function(){return this.debugging=!0},stopDebugging:function(){return this.debugging=null},log:function(){var t;if(t=1<=arguments.length?e.call(arguments,0):[],this.debugging)return t.push(Date.now()),console.log.apply(console,["[ActionCable]"].concat(e.call(t)))}}}).call(this)}).call(this);var t=this.ActionCable;(function(){(function(){var e=function(t,e){return function(){return t.apply(e,arguments)}};t.ConnectionMonitor=function(){function n(t){this.connection=t,this.visibilityDidChange=e(this.visibilityDidChange,this),this.reconnectAttempts=0}var r,i,o;return n.pollInterval={min:3,max:30},n.staleThreshold=6,n.prototype.start=function(){if(!this.isRunning())return this.startedAt=i(),delete this.stoppedAt,this.startPolling(),document.addEventListener("visibilitychange",this.visibilityDidChange),t.log("ConnectionMonitor started. pollInterval = "+this.getPollInterval()+" ms")},n.prototype.stop=function(){if(this.isRunning())return this.stoppedAt=i(),this.stopPolling(),document.removeEventListener("visibilitychange",this.visibilityDidChange),t.log("ConnectionMonitor stopped")},n.prototype.isRunning=function(){return null!=this.startedAt&&null==this.stoppedAt},n.prototype.recordPing=function(){return this.pingedAt=i()},n.prototype.recordConnect=function(){return this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,t.log("ConnectionMonitor recorded connect")},n.prototype.recordDisconnect=function(){return this.disconnectedAt=i(),t.log("ConnectionMonitor recorded disconnect")},n.prototype.startPolling=function(){return this.stopPolling(),this.poll()},n.prototype.stopPolling=function(){return clearTimeout(this.pollTimeout)},n.prototype.poll=function(){return this.pollTimeout=setTimeout(function(t){return function(){return t.reconnectIfStale(),t.poll()}}(this),this.getPollInterval())},n.prototype.getPollInterval=function(){var t,e,n,i;return i=this.constructor.pollInterval,n=i.min,e=i.max,t=5*Math.log(this.reconnectAttempts+1),Math.round(1e3*r(t,n,e))},n.prototype.reconnectIfStale=function(){if(this.connectionIsStale())return t.log("ConnectionMonitor detected stale connection. reconnectAttempts = "+this.reconnectAttempts+", pollInterval = "+this.getPollInterval()+" ms, time disconnected = "+o(this.disconnectedAt)+" s, stale threshold = "+this.constructor.staleThreshold+" s"),this.reconnectAttempts++,this.disconnectedRecently()?t.log("ConnectionMonitor skipping reopening recent disconnect"):(t.log("ConnectionMonitor reopening"),this.connection.reopen())},n.prototype.connectionIsStale=function(){var t;return o(null!=(t=this.pingedAt)?t:this.startedAt)>this.constructor.staleThreshold},n.prototype.disconnectedRecently=function(){return this.disconnectedAt&&o(this.disconnectedAt)<this.constructor.staleThreshold},n.prototype.visibilityDidChange=function(){if("visible"===document.visibilityState)return setTimeout(function(e){return function(){if(e.connectionIsStale()||!e.connection.isOpen())return t.log("ConnectionMonitor reopening stale connection on visibilitychange. visbilityState = "+document.visibilityState),e.connection.reopen()}}(this),200)},i=function(){return(new Date).getTime()},o=function(t){return(i()-t)/1e3},r=function(t,e,n){return Math.max(e,Math.min(n,t))},n}()}).call(this),function(){var e,n,r,i,o,a,s=[].slice,l=function(t,e){return function(){return t.apply(e,arguments)}},u=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};i=t.INTERNAL,n=i.message_types,r=i.protocols,o=2<=r.length?s.call(r,0,e=r.length-1):(e=0,[]),a=r[e++],t.Connection=function(){function e(e){this.consumer=e,this.open=l(this.open,this),this.subscriptions=this.consumer.subscriptions,this.monitor=new t.ConnectionMonitor(this),this.disconnected=!0}return e.reopenDelay=500,e.prototype.send=function(t){return!!this.isOpen()&&(this.webSocket.send(JSON.stringify(t)),!0)},e.prototype.open=function(){if(this.isActive())throw t.log("Attempted to open WebSocket, but existing socket is "+this.getState()),new Error("Existing connection must be closed before opening");return t.log("Opening WebSocket, current state is "+this.getState()+", subprotocols: "+r),null!=this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new WebSocket(this.consumer.url,r),this.installEventHandlers(),this.monitor.start(),!0},e.prototype.close=function(t){var e,n;if(e=(null!=t?t:{allowReconnect:!0}).allowReconnect,e||this.monitor.stop(),this.isActive())return null!=(n=this.webSocket)?n.close():void 0},e.prototype.reopen=function(){var e;if(t.log("Reopening WebSocket, current state is "+this.getState()),!this.isActive())return this.open();try{return this.close()}catch(n){return e=n,t.log("Failed to reopen WebSocket",e)}finally{t.log("Reopening WebSocket in "+this.constructor.reopenDelay+"ms"),setTimeout(this.open,this.constructor.reopenDelay)}},e.prototype.getProtocol=function(){var t;return null!=(t=this.webSocket)?t.protocol:void 0},e.prototype.isOpen=function(){return this.isState("open")},e.prototype.isActive=function(){return this.isState("open","connecting")},e.prototype.isProtocolSupported=function(){var t;return t=this.getProtocol(),u.call(o,t)>=0},e.prototype.isState=function(){var t,e;return e=1<=arguments.length?s.call(arguments,0):[],t=this.getState(),u.call(e,t)>=0},e.prototype.getState=function(){var t,e,n;for(e in WebSocket)if(n=WebSocket[e],n===(null!=(t=this.webSocket)?t.readyState:void 0))return e.toLowerCase();return null},e.prototype.installEventHandlers=function(){var t,e;for(t in this.events)e=this.events[t].bind(this),this.webSocket["on"+t]=e},e.prototype.uninstallEventHandlers=function(){var t;for(t in this.events)this.webSocket["on"+t]=function(){}},e.prototype.events={message:function(t){var e,r,i,o;if(this.isProtocolSupported())switch(i=JSON.parse(t.data),e=i.identifier,r=i.message,o=i.type,o){case n.welcome:return this.monitor.recordConnect(),this.subscriptions.reload();case n.ping:return this.monitor.recordPing();case n.confirmation:return this.subscriptions.notify(e,"connected");case n.rejection:return this.subscriptions.reject(e);default:return this.subscriptions.notify(e,"received",r)}},open:function(){if(t.log("WebSocket onopen event, using '"+this.getProtocol()+"' subprotocol"),this.disconnected=!1,!this.isProtocolSupported())return t.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close:function(){if(t.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error:function(){return t.log("WebSocket onerror event")}},e}()}.call(this),function(){var e=[].slice;t.Subscriptions=function(){function n(t){this.consumer=t,this.subscriptions=[]}return n.prototype.create=function(e,n){var r,i,o;return r=e,i="object"==typeof r?r:{channel:r},o=new t.Subscription(this.consumer,i,n),this.add(o)},n.prototype.add=function(t){return this.subscriptions.push(t),this.consumer.ensureActiveConnection(),this.notify(t,"initialized"),this.sendCommand(t,"subscribe"),t},n.prototype.remove=function(t){return this.forget(t),this.findAll(t.identifier).length||this.sendCommand(t,"unsubscribe"),t},n.prototype.reject=function(t){var e,n,r,i,o;for(r=this.findAll(t),i=[],e=0,n=r.length;e<n;e++)o=r[e],this.forget(o),this.notify(o,"rejected"),i.push(o);return i},n.prototype.forget=function(t){var e;return this.subscriptions=function(){var n,r,i,o;for(i=this.subscriptions,o=[],n=0,r=i.length;n<r;n++)e=i[n],e!==t&&o.push(e);return o}.call(this),t},n.prototype.findAll=function(t){var e,n,r,i,o;for(r=this.subscriptions,i=[],e=0,n=r.length;e<n;e++)o=r[e],o.identifier===t&&i.push(o);return i},n.prototype.reload=function(){var t,e,n,r,i;for(n=this.subscriptions,r=[],t=0,e=n.length;t<e;t++)i=n[t],r.push(this.sendCommand(i,"subscribe"));return r},n.prototype.notifyAll=function(){var t,n,r,i,o,a,s;for(n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],o=this.subscriptions,a=[],r=0,i=o.length;r<i;r++)s=o[r],a.push(this.notify.apply(this,[s,n].concat(e.call(t))));return a},n.prototype.notify=function(){var t,n,r,i,o,a,s;for(a=arguments[0],n=arguments[1],t=3<=arguments.length?e.call(arguments,2):[],s="string"==typeof a?this.findAll(a):[a],o=[],r=0,i=s.length;r<i;r++)a=s[r],o.push("function"==typeof a[n]?a[n].apply(a,t):void 0);return o},n.prototype.sendCommand=function(t,e){var n;return n=t.identifier,this.consumer.send({command:e,identifier:n})},n}()}.call(this),function(){t.Subscription=function(){function t(t,n,r){this.consumer=t,null==n&&(n={}),this.identifier=JSON.stringify(n),e(this,r)}var e;return t.prototype.perform=function(t,e){return null==e&&(e={}),e.action=t,this.send(e)},t.prototype.send=function(t){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(t)})},t.prototype.unsubscribe=function(){return this.consumer.subscriptions.remove(this)},e=function(t,e){var n,r;if(null!=e)for(n in e)r=e[n],t[n]=r;return t},t}()}.call(this),function(){t.Consumer=function(){function e(e){this.url=e,this.subscriptions=new t.Subscriptions(this),this.connection=new t.Connection(this)}return e.prototype.send=function(t){return this.connection.send(t)},e.prototype.connect=function(){return this.connection.open()},e.prototype.disconnect=function(){return this.connection.close({allowReconnect:!1})},e.prototype.ensureActiveConnection=function(){if(!this.connection.isActive())return this.connection.open()},e}()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd&&define(t)}).call(this);var c=t(function(t,e){"use strict";function n(t,e,n){return t.subscriptions.create({channel:"GameChannel",board_id:e},n)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n}),p=t(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(c),r=ActionCable.createConsumer(),i={game:n["default"]},o={_consumer:r,openChannel:function(t){for(var e=i[t],n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return void 0===e?null:e.apply(void 0,[r].concat(o))}};e["default"]=o});!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Handlebars=e():t.Handlebars=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(){var t=new s.HandlebarsEnvironment;return d.extend(t,s),t.SafeString=u["default"],t.Exception=p["default"],t.Utils=d,t.escapeExpression=d.escapeExpression,t.VM=v,t.template=function(e){return v.template(e,t)},t}var i=n(1)["default"],o=n(2)["default"];e.__esModule=!0;var a=n(3),s=i(a),l=n(17),u=o(l),c=n(5),p=o(c),f=n(4),d=i(f),h=n(18),v=i(h),y=n(19),m=o(y),g=r();g.create=r,m["default"](g),g["default"]=g,e["default"]=g,t.exports=e["default"]},function(t,e){"use strict";e["default"]=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e},e.__esModule=!0},function(t,e){"use strict";e["default"]=function(t){return t&&t.__esModule?t:{"default":t}},e.__esModule=!0},function(t,e,n){"use strict";function r(t,e,n){this.helpers=t||{},this.partials=e||{},this.decorators=n||{},l.registerDefaultHelpers(this),u.registerDefaultDecorators(this)}var i=n(2)["default"];e.__esModule=!0,e.HandlebarsEnvironment=r;var o=n(4),a=n(5),s=i(a),l=n(6),u=n(14),c=n(16),p=i(c),f="4.0.5";e.VERSION=f;var d=7;e.COMPILER_REVISION=d;var h={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};e.REVISION_CHANGES=h;var v="[object Object]";r.prototype={constructor:r,logger:p["default"],log:p["default"].log,registerHelper:function(t,e){if(o.toString.call(t)===v){if(e)throw new s["default"]("Arg not supported with multiple helpers");o.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(o.toString.call(t)===v)o.extend(this.partials,t);else{if("undefined"==typeof e)throw new s["default"]('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(o.toString.call(t)===v){if(e)throw new s["default"]("Arg not supported with multiple decorators");o.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]}};var y=p["default"].log;e.log=y,e.createFrame=o.createFrame,e.logger=p["default"]},function(t,e){"use strict";function n(t){return c[t]}function r(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}function i(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function o(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return f.test(t)?t.replace(p,n):t}function a(t){return!t&&0!==t||!(!v(t)||0!==t.length)}function s(t){var e=r({},t);return e._parent=t,e}function l(t,e){return t.path=e,t}function u(t,e){return(t?t+".":"")+e}e.__esModule=!0,e.extend=r,e.indexOf=i,e.escapeExpression=o,e.isEmpty=a,e.createFrame=s,e.blockParams=l,e.appendContextPath=u;var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},p=/[&<>"'`=]/g,f=/[&<>"'`=]/,d=Object.prototype.toString;e.toString=d;var h=function(t){return"function"==typeof t};h(/x/)&&(e.isFunction=h=function(t){return"function"==typeof t&&"[object Function]"===d.call(t)}),e.isFunction=h;var v=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===d.call(t)};e.isArray=v},function(t,e){"use strict";function n(t,e){var i=e&&e.loc,o=void 0,a=void 0;i&&(o=i.start.line,a=i.start.column,t+=" - "+o+":"+a);for(var s=Error.prototype.constructor.call(this,t),l=0;l<r.length;l++)this[r[l]]=s[r[l]];Error.captureStackTrace&&Error.captureStackTrace(this,n),i&&(this.lineNumber=o,this.column=a)}e.__esModule=!0;var r=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,e["default"]=n,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){a["default"](t),l["default"](t),c["default"](t),f["default"](t),h["default"](t),y["default"](t),g["default"](t)}var i=n(2)["default"];e.__esModule=!0,e.registerDefaultHelpers=r;var o=n(7),a=i(o),s=n(8),l=i(s),u=n(9),c=i(u),p=n(10),f=i(p),d=n(11),h=i(d),v=n(12),y=i(v),m=n(13),g=i(m)},function(t,e,n){"use strict";e.__esModule=!0;var r=n(4);e["default"]=function(t){t.registerHelper("blockHelperMissing",function(e,n){var i=n.inverse,o=n.fn;if(e===!0)return o(this);if(e===!1||null==e)return i(this);if(r.isArray(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):i(this);if(n.data&&n.ids){var a=r.createFrame(n.data);a.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:a}}return o(e,n)})},t.exports=e["default"]},function(t,e,n){"use strict";var r=n(2)["default"];e.__esModule=!0;var i=n(4),o=n(5),a=r(o);e["default"]=function(t){t.registerHelper("each",function(t,e){function n(e,n,o){u&&(u.key=e,u.index=n,u.first=0===n,u.last=!!o,c&&(u.contextPath=c+e)),l+=r(t[e],{data:u,blockParams:i.blockParams([t[e],e],[c+e,null])})}if(!e)throw new a["default"]("Must pass iterator to #each");var r=e.fn,o=e.inverse,s=0,l="",u=void 0,c=void 0;if(e.data&&e.ids&&(c=i.appendContextPath(e.data.contextPath,e.ids[0])+"."),i.isFunction(t)&&(t=t.call(this)),e.data&&(u=i.createFrame(e.data)),t&&"object"==typeof t)if(i.isArray(t))for(var p=t.length;s<p;s++)s in t&&n(s,s,s===t.length-1);else{var f=void 0;for(var d in t)t.hasOwnProperty(d)&&(void 0!==f&&n(f,s-1),f=d,s++);void 0!==f&&n(f,s-1,!0)}return 0===s&&(l=o(this)),l})},t.exports=e["default"]},function(t,e,n){"use strict";var r=n(2)["default"];e.__esModule=!0;var i=n(5),o=r(i);e["default"]=function(t){t.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new o["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=e["default"]},function(t,e,n){"use strict";e.__esModule=!0;var r=n(4);e["default"]=function(t){t.registerHelper("if",function(t,e){return r.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||r.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t){t.registerHelper("log",function(){for(var e=[void 0],n=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)e.push(arguments[r]);var i=1;null!=n.hash.level?i=n.hash.level:n.data&&null!=n.data.level&&(i=n.data.level),e[0]=i,t.log.apply(t,e)})},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t){t.registerHelper("lookup",function(t,e){return t&&t[e]})},t.exports=e["default"]},function(t,e,n){"use strict";e.__esModule=!0;var r=n(4);e["default"]=function(t){t.registerHelper("with",function(t,e){r.isFunction(t)&&(t=t.call(this));var n=e.fn;if(r.isEmpty(t))return e.inverse(this);var i=e.data;return e.data&&e.ids&&(i=r.createFrame(e.data),i.contextPath=r.appendContextPath(e.data.contextPath,e.ids[0])),n(t,{data:i,blockParams:r.blockParams([t],[i&&i.contextPath])})})},t.exports=e["default"]},function(t,e,n){"use strict";function r(t){a["default"](t)}var i=n(2)["default"];e.__esModule=!0,e.registerDefaultDecorators=r;var o=n(15),a=i(o)},function(t,e,n){"use strict";e.__esModule=!0;var r=n(4);e["default"]=function(t){t.registerDecorator("inline",function(t,e,n,i){var o=t;return e.partials||(e.partials={},o=function(i,o){var a=n.partials;n.partials=r.extend({},a,e.partials);var s=t(i,o);return n.partials=a,s}),e.partials[i.args[0]]=i.fn,o})},t.exports=e["default"]},function(t,e,n){"use strict";e.__esModule=!0;var r=n(4),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=r.indexOf(i.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=i.lookupLevel(t),"undefined"!=typeof console&&i.lookupLevel(i.level)<=t){var e=i.methodMap[t];console[e]||(e="log");for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];console[e].apply(console,r)}}};e["default"]=i,t.exports=e["default"]},function(t,e){"use strict";function n(t){this.string=t}e.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},e["default"]=n,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){var e=t&&t[0]||1,n=m.COMPILER_REVISION;if(e!==n){if(e<n){var r=m.REVISION_CHANGES[n],i=m.REVISION_CHANGES[e];throw new y["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new y["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function i(t,e){function n(n,r,i){i.hash&&(r=h.extend({},r,i.hash),i.ids&&(i.ids[0]=!0)),n=e.VM.resolvePartial.call(this,n,r,i);var o=e.VM.invokePartial.call(this,n,r,i);if(null==o&&e.compile&&(i.partials[i.name]=e.compile(n,t.compilerOptions,e),o=i.partials[i.name](r,i)),null!=o){if(i.indent){for(var a=o.split("\n"),s=0,l=a.length;s<l&&(a[s]||s+1!==l);s++)a[s]=i.indent+a[s];o=a.join("\n")}return o}throw new y["default"]("The partial "+i.name+" could not be compiled when running in runtime-only mode")}function r(e){function n(e){return""+t.main(i,e,i.helpers,i.partials,a,l,s)}var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=o.data;r._setup(o),!o.partial&&t.useData&&(a=u(e,a));var s=void 0,l=t.useBlockParams?[]:void 0;return t.useDepths&&(s=o.depths?e!==o.depths[0]?[e].concat(o.depths):o.depths:[e]),(n=c(t.main,n,i,o.depths||[],a,l))(e,o)}if(!e)throw new y["default"]("No environment passed to template");if(!t||!t.main)throw new y["default"]("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var i={strict:function(t,e){if(!(e in t))throw new y["default"]('"'+e+'" not defined in '+t);return t[e]},lookup:function(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r]&&null!=t[r][e])return t[r][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:h.escapeExpression,invokePartial:n,fn:function(e){var n=t[e];return n.decorator=t[e+"_d"],n},programs:[],program:function(t,e,n,r,i){var a=this.programs[t],s=this.fn(t);return e||i||r||n?a=o(this,t,s,e,n,r,i):a||(a=this.programs[t]=o(this,t,s)),a},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=h.extend({},e,t)),n},noop:e.VM.noop,compilerInfo:t.compiler};return r.isTop=!0,r._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials,i.decorators=n.decorators):(i.helpers=i.merge(n.helpers,e.helpers),t.usePartial&&(i.partials=i.merge(n.partials,e.partials)),(t.usePartial||t.useDecorators)&&(i.decorators=i.merge(n.decorators,e.decorators)))},r._child=function(e,n,r,a){if(t.useBlockParams&&!r)throw new y["default"]("must pass block params");
if(t.useDepths&&!a)throw new y["default"]("must pass parent depths");return o(i,e,t[e],n,0,r,a)},r}function o(t,e,n,r,i,o,a){function s(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=a;return a&&e!==a[0]&&(s=[e].concat(a)),n(t,e,t.helpers,t.partials,i.data||r,o&&[i.blockParams].concat(o),s)}return s=c(n,s,t,a,r,o),s.program=e,s.depth=a?a.length:0,s.blockParams=i||0,s}function a(t,e,n){return t?t.call||n.name||(n.name=t,t=n.partials[t]):t="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],t}function s(t,e,n){n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var r=void 0;if(n.fn&&n.fn!==l&&(n.data=m.createFrame(n.data),r=n.data["partial-block"]=n.fn,r.partials&&(n.partials=h.extend({},n.partials,r.partials))),void 0===t&&r&&(t=r),void 0===t)throw new y["default"]("The partial "+n.name+" could not be found");if(t instanceof Function)return t(e,n)}function l(){return""}function u(t,e){return e&&"root"in e||(e=e?m.createFrame(e):{},e.root=t),e}function c(t,e,n,r,i,o){if(t.decorator){var a={};e=t.decorator(e,a,n,r&&r[0],i,o,r),h.extend(e,a)}return e}var p=n(1)["default"],f=n(2)["default"];e.__esModule=!0,e.checkRevision=r,e.template=i,e.wrapProgram=o,e.resolvePartial=a,e.invokePartial=s,e.noop=l;var d=n(4),h=p(d),v=n(5),y=f(v),m=n(3)},function(t,e){(function(n){"use strict";e.__esModule=!0,e["default"]=function(t){var e="undefined"!=typeof n?n:window,r=e.Handlebars;t.noConflict=function(){return e.Handlebars===t&&(e.Handlebars=r),t}},t.exports=e["default"]}).call(e,function(){return this}())}])}),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.alert=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,r,i){var o;return'<div class="callout '+t.escapeExpression((o=null!=(o=n.type||(null!=e?e.type:e))?o:n.helperMissing,"function"==typeof o?o.call(null!=e?e:{},{name:"type",hash:{},data:i}):o))+'">'+t.escapeExpression((o=null!=(o=n.text||(null!=e?e.text:e))?o:n.helperMissing,"function"==typeof o?o.call(null!=e?e:{},{name:"text",hash:{},data:i}):o))+"</div>"},useData:!0}),this.HandlebarsTemplates.alert}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.section=Handlebars.template({1:function(t,e,n,r,i){var o;return null!=(o=n.each.call(null!=e?e:{},null!=e?e.actions:e,{name:"each",hash:{},fn:t.program(2,i,0),inverse:t.noop,data:i}))?o:""},2:function(t,e,n,r,i){var o;return'\n        <button type="button" class="button secondary" data-action="'+t.escapeExpression((o=null!=(o=n.action||(null!=e?e.action:e))?o:n.helperMissing,"function"==typeof o?o.call(null!=e?e:{},{name:"action",hash:{},data:i}):o))+'" data-args="'+t.escapeExpression((o=null!=(o=n.args||(null!=e?e.args:e))?o:n.helperMissing,"function"==typeof o?o.call(null!=e?e:{},{name:"args",hash:{},data:i}):o))+'">'+t.escapeExpression((o=null!=(o=n.text||(null!=e?e.text:e))?o:n.helperMissing,"function"==typeof o?o.call(null!=e?e:{},{name:"text",hash:{},data:i}):o))+"</button>\n    "},4:function(t,e,n,r,i){var o,a;return'        <span class="card '+t.escapeExpression((a=null!=(a=n.suit||(null!=e?e.suit:e))?a:n.helperMissing,"function"==typeof a?a.call(null!=e?e:{},{name:"suit",hash:{},data:i}):a))+" "+(null!=(o=n["if"].call(null!=e?e:{},i&&i.first,{name:"if",hash:{},fn:t.program(5,i,0),inverse:t.noop,data:i}))?o:"")+" "+(null!=(o=n["if"].call(null!=e?e:{},i&&i.last,{name:"if",hash:{},fn:t.program(7,i,0),inverse:t.noop,data:i}))?o:"")+" "+(null!=(o=n["if"].call(null!=e?e:{},null!=e?e.hidden:e,{name:"if",hash:{},fn:t.program(9,i,0),inverse:t.noop,data:i}))?o:"")+'"\n              data-card="'+t.escapeExpression((a=null!=(a=n.index||(null!=e?e.index:e))?a:n.helperMissing,"function"==typeof a?a.call(null!=e?e:{},{name:"index",hash:{},data:i}):a))+'" data-action="lay">'+t.escapeExpression((a=null!=(a=n.text||(null!=e?e.text:e))?a:n.helperMissing,"function"==typeof a?a.call(null!=e?e:{},{name:"text",hash:{},data:i}):a))+"</span>\n"},5:function(){return"first"},7:function(){return"last"},9:function(){return"hidden"},11:function(t,e,n,r,i){var o;return t.escapeExpression((o=null!=(o=n.queer||(null!=e?e.queer:e))?o:n.helperMissing,"function"==typeof o?o.call(null!=e?e:{},{name:"queer",hash:{},data:i}):o))},compiler:[7,">= 4.0.0"],main:function(t,e,n,r,i){var o,a;return'<div class="section '+t.escapeExpression((a=null!=(a=n.css_classes||(null!=e?e.css_classes:e))?a:n.helperMissing,"function"==typeof a?a.call(null!=e?e:{},{name:"css_classes",hash:{},data:i}):a))+'">\n    <span class="title">'+t.escapeExpression((a=null!=(a=n.title||(null!=e?e.title:e))?a:n.helperMissing,"function"==typeof a?a.call(null!=e?e:{},{name:"title",hash:{},data:i}):a))+"</span>\n\n    "+(null!=(o=n["if"].call(null!=e?e:{},null!=e?e.actions:e,{name:"if",hash:{},fn:t.program(1,i,0),inverse:t.noop,data:i}))?o:"")+"\n\n    <br/>\n\n"+(null!=(o=n.each.call(null!=e?e:{},null!=e?e.cards:e,{name:"each",hash:{},fn:t.program(4,i,0),inverse:t.noop,data:i}))?o:"")+"\n    "+(null!=(o=n["if"].call(null!=e?e:{},null!=e?e.queer:e,{name:"if",hash:{},fn:t.program(11,i,0),inverse:t.noop,data:i}))?o:"")+"\n\n</div>"},useData:!0}),this.HandlebarsTemplates.section}.call(this);var f=t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(e,r){n(this,t),this.$c=r,this.ended=!1,this.game=e,this.game.history=[];var i=this;e.onBadMove=function(t){i.printAlert(this.t("bad_move."+t.error))},e.localPlayer().gameStateChanged=function(){i.printTurn(this.game.createTurn())},e.localPlayer().playerEnded=function(t){i.ended=!0;var n=void 0;n=t===i.game.player_i?"<h2>"+e.t("texts.you_win")+"</h2>":"<h2>"+e.t("texts.you_lost")+"</h2>",i.$c.append('<div class="overlay">'+n+"</div>")}}return e(t,[{key:"printTurn",value:function(t){var e=this;this.$c.html(""),this.turn=t,this.$c.append(HandlebarsTemplates.section({section:"deck",title:t.game.t("titles.deck"),cards:this.generateCardsHelper(t.state.deck,{visible:this.debug})})),this.$c.append(HandlebarsTemplates.section({section:"pile",title:t.game.t("titles.pile"),cards:this.generateCardsHelper(t.state.pile,{visible:!0}),queer:t.state.queer?s.cards.transcribe(t.state.suit):null})),t.state.players.forEach(function(n,r){var i=t.game.player_i===r,o=t.state.on_move===r,a=t.possibleActions(),s=$(HandlebarsTemplates.section({css_classes:["player",i?"local_player":void 0,o?"on_turn":void 0].join(" "),title:t.game.t("titles.player")+" - "+t.game.players[r].name,cards:e.generateCardsHelper(t.state.players[r],{visible:i||e.debug}),actions:i&&o?e.generateActionsHelper(t,a):null}));o&&s.on("click","[data-action]",e.playerMove.bind(e,t)),e.$c.append(s)}),this.$c.append('<div class="printout"></div>')}},{key:"generateCardsHelper",value:function(t,e){var n=!!e.visible;return t.map(function(t,e){return n?{index:e,text:t.text,suit:s.cards.suitName(t.suit)}:{index:e,hidden:!0}})}},{key:"generateActionsHelper",value:function(t,e){var n=[];return e.forEach(function(e){switch(e){case"draw":case"stay":n.push({action:e,text:t.game.t("actions."+e)});break;case"devour":n.push({action:e,text:t.game.t("actions."+e)+" "+t.state.attack});break;case"queer":s.cards.SUITS.forEach(function(t){n.push({action:e,args:t,text:s.cards.transcribe(t)})})}}),n}},{key:"clearAlert",value:function(){this.$c.find(".printout").html("")}},{key:"printAlert",value:function(t){this.$c.find(".printout").html(HandlebarsTemplates.alert({text:t,type:"alert"}))}},{key:"playerMove",value:function(t,e){if(this.clearAlert(),!this.ended){var n=$(e.target),r=void 0;switch(n.data("action")){case"draw":case"devour":r=t.draw();break;case"stay":r=t.doNothing();break;case"lay":var i=n.data("card");r=t.lay(i);break;case"queer":var o=n.data("args");r=t.selectQueenSuit(o)}t.makeAction(r)}}}]),t}();r["default"]=i}),d=t(function(t,e){"use strict";function n(t,e){var n=e.action,i=e.failed;t.onMove=function(){var e=t.game.createTurn(),o=e.possibleActions(),a=void 0;if(o.indexOf("lay")!==-1){o.splice(o.indexOf("lay"),1);var l=e.state.players[this.player_i].map(function(t,n){return e.lay(n)}).filter(function(t){return t.valid});a=r(l)}if(!a)switch(r(o)){case"draw":case"devour":a=e.draw();break;case"stay":a=e.doNothing();break;case"queer":a=e.selectQueenSuit(r(s.cards.SUITS))}if(!a)return void("function"==typeof i&&i(e,a));var u=function(){e.makeAction(a)};"function"==typeof n?n(e,a,u):u()}}function r(t){return t[Math.floor(Math.random()*t.length)]}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n});t(function(){"use strict";function t(t,e){var r=new u.Game(l.map(function(t){return new u.Player(t)}),e);r.translations=i;var o=new n["default"](r,$(t));return o}function e(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;(0,r["default"])(t,{action:function(n,r,i){setTimeout(function(){console.log(t.player_i+" moves",r.serialize(),r),i()},e)},failed:function(e){console.log(t.name+" failed to compute for",e.state,e.possibleActions())}})}var n=(a(p),a(f)),r=a(d),i={titles:{deck:"Bal\xedk",pile:"Kopa",player:"Hr\xe1\u010d"},actions:{lay:"Polo\u017e",stay:"St\u016fj",draw:"Ber",devour:"\u017der",queer:"Zm\u011b\u0148 na"},bad_move:{nothing:"Mus\xed\u0161 ud\u011blat tah!",no_match:"Tuto kartu nelze zahr\xe1t.",not_enough_cards:"Do\u0161ly karty!",ace:"Na eso m\u016f\u017ee\u0161 zahr\xe1t jenom dal\u0161\xed eso.",ace_end:"Eso nelze zahr\xe1t jako posledn\xed kartu",attack:"Jsi pod \xfatokem!",attack_on_ten:"Na des\xedtku nelze zahr\xe1t \xfato\u010dnou kartu.",eights:"Polo\u017e dal\u0161\xed osmu nebo ukon\u010di dobr\xe1n\xedm.",no_queen:"Nebyla zahr\xe1na d\xe1ma.",queer:"Mus\xed\u0161 vybrat novou barvu."},texts:{you_win:"Vyhr\xe1l jsi!",you_lost:"Prohr\xe1l jsi."}},o=s.cards.shuffleNewDeck(),l=["hr\xe1\u010d","random AI"],c=function(t){t.forEach(function(e){var n=t.filter(function(t){return t!==e});e.propagateMove=function(t){n.forEach(function(e){return e.onPlayerMoved(t)})}})},h=t("#container1",0),v=new u.Game(l.map(function(t){return new u.Player(t)}),1);e(v.localPlayer(),10),c([h.game,v]),h.game.begin(o.slice()),v.begin(o.slice())})}();